I",<h1 id="20210112">20210112</h1>

<h3 id="부제--스티커-사진-프로그램-만들기">부제 : 스티커 사진 프로그램 만들기</h3>

<p>오늘 노드에서는 얼굴 인식의 방법과 얼굴 인식 결과를 간단하게 응용해서 얼굴에 스티커를 붙이는 프로그램을 작성했다.</p>

<p>OpenCV의 기능들을 사용하는 게 중요했는데, OpenCV가 처리하는 이미지 데이터의 원하는 부분에 제대로 접근하려면 좌표 개념이 매우 중요하다. OpenCV는 행렬의 방식으로 데이터를 표현하고 있기 때문에, y축을 먼저 기술하고 x축을 기술하게 되며, <strong>좌상단이 원점</strong>이다.</p>

<p><img src="https://t1.daumcdn.net/cfile/tistory/2610B8475436287821" alt="카이제곱 :: '컴퓨터비전/영상처리' 카테고리의 글 목록 (5 Page)" /></p>

<p>이 좌표가 오늘의 핵심 키포인트. tmi로 계속 3차원 데이터를 다루다가 2차원 데이터를 다루게 되니 조금 어색했다. 3차원 좌표계는 또 달라서…</p>

<p>그리고 HOG 모델을 통해 얼굴의 특이점(landmark)을 추출해 내어 사진에서 얼굴을 찾을 수 있었다. 간단히 설명하면 이미지를 일정 구역들로 나누고 , 그 안에서 Gradient를 찾아낸다. 이 Gradient에서 얼굴 패턴으로 보이는 것을 찾아낸다.</p>

<p><img src="https://miro.medium.com/max/800/1*HtgQZ4guaIo8wflbsR1MLw.png" alt="Image for post" /></p>

<p><img src="https://blog.kakaocdn.net/dn/c8fGmV/btqGQcZBwNz/JzcH66lqvnxL7WDd3xo7EK/img.png" alt="얼굴인식 출입통제 프로그램을 만들어보세요.(유튜브 소개)" /></p>

<p>우리가 쓰는 카메라 어플에서 얼굴을 인식하는 방법 중 하나가 이 랜드마크를 사용하는 방법이라고 한다.</p>

<p>그리고는 스티커 사이즈를 얼굴 이미지에 따라 크기를 조정하고, 이미지 가공을 하게 된다. 스티커를 놓을 자리를 랜드마크의 좌표에 따라서 결정하고, 비율을 랜드마크를 이용해서 조절하게 된다.</p>

<p>이미지는 numpy의 array 타입으로 다룬다. 그리고 OpenCV의 기능을 활용하면 이미지 간의 연산이 가능하다. 이 둘을 적절히 조합하면 스티커를 이미지 위에 적절히 올릴 수 있다.</p>

<h4 id="후기">후기</h4>

<p>지금은 단순히 스티커가 놓일 위치를 해당하는 영역의 랜드마크들을 둘러싸는 bounding box로 구하고 있는데, 좀 더 정밀하게 하려면 랜드마크를 정확히 둘러싸는 minimum bounding box를 구하고,  affine transformation을 통해 얼굴의 각도가 틀어진다거나 하는 그런 경우에 대비할 수 있을 것이다.</p>

<p>노드 이제 정리하고 회고만 넣으면 끝!</p>

<p>오늘 노드 진행한 코드는 후에 보완할 예정입니다.</p>
:ET